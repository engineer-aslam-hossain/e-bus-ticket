[{"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\index.tsx":"1","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\reportWebVitals.ts":"2","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\App.tsx":"3","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Home\\Home.tsx":"4","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Header\\Header.js":"5","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchBar\\SearchBar.tsx":"6","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchResult\\SearchResults.tsx":"7","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchResult\\SearchResult.tsx":"8","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Seat\\Seat.tsx":"9","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SeatInfo\\SeatInfo.tsx":"10","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\BookingModal\\BookingModal.tsx":"11"},{"size":562,"mtime":1608743971633,"results":"12","hashOfConfig":"13"},{"size":425,"mtime":499162500000,"results":"14","hashOfConfig":"13"},{"size":2964,"mtime":1608779815432,"results":"15","hashOfConfig":"13"},{"size":367,"mtime":1608731485973,"results":"16","hashOfConfig":"13"},{"size":874,"mtime":1608781109135,"results":"17","hashOfConfig":"13"},{"size":5059,"mtime":1608780969302,"results":"18","hashOfConfig":"13"},{"size":597,"mtime":1608782268752,"results":"19","hashOfConfig":"13"},{"size":4710,"mtime":1608781337518,"results":"20","hashOfConfig":"13"},{"size":736,"mtime":1608732691075,"results":"21","hashOfConfig":"13"},{"size":976,"mtime":1608732822357,"results":"22","hashOfConfig":"13"},{"size":4481,"mtime":1608781530580,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1g4ayml",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"26"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"26"},"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\index.tsx",[],["50","51"],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\reportWebVitals.ts",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\App.tsx",["52"],"import React, { createContext, useCallback, useEffect, useState } from 'react';\nimport Home from './components/Home/Home';\nimport { interval } from 'rxjs';\nimport { scan, share, startWith, takeWhile } from 'rxjs/operators';\n\nimport Swal from 'sweetalert2';\ninterface Booking {\n  busId: number;\n  seatNumber: string;\n  gender: string;\n}\n\ninterface SearchQuery {\n  from: string;\n  to: string;\n  journeyDate: string;\n  returnDate?: string;\n}\n\ninterface BookingContextData {\n  bookings: Booking[];\n  searchQuery: SearchQuery;\n  makeSearch: (fromData: any) => void;\n  fetchBookings: () => void;\n  bookSeat: (busId: string, seatNumber: string, gender: string) => void;\n  unBookSeat: (busId: string, seatNumber: string) => void;\n}\n\nexport const BookingContextDefaultValue: BookingContextData = {\n  bookings: [],\n  searchQuery: {\n    to: '',\n    from: '',\n    journeyDate: '',\n    returnDate: '',\n  },\n  makeSearch: () => null,\n  fetchBookings: () => null,\n  bookSeat: () => null,\n  unBookSeat: () => null,\n};\n\nconst observable$ = interval(1000 * 60 * 10)\n  .pipe(\n    startWith(1000 * 60 * 10),\n    scan((time) => time - 1),\n    takeWhile((time) => time > 0)\n  )\n  .pipe(share());\n\nexport const BookingContext = createContext<BookingContextData>(\n  BookingContextDefaultValue\n);\n\nfunction App() {\n  const [bookings, setBookings] = useState<Booking[]>([]);\n  const [searchQuery, setSearchQuery] = useState<SearchQuery>({\n    to: '',\n    from: '',\n    journeyDate: '',\n    returnDate: '',\n  });\n  const makeSearch = (fromData: SearchQuery) => {\n    setSearchQuery(fromData);\n  };\n  const fetchBookings = useCallback(() => {\n    const olderBookings: any = localStorage.getItem('bookings');\n    const parsedOldBookings: any =\n      (olderBookings && JSON.parse(olderBookings)) || [];\n    setBookings(parsedOldBookings);\n  }, [setBookings]);\n\n  const bookSeat = useCallback(\n    (busId, seatNumber, gender) => {\n      const olderBookings: any = localStorage.getItem('bookings');\n      const parsedOldBookings: any =\n        (olderBookings && JSON.parse(olderBookings)) || [];\n      const sub: any = observable$.subscribe(() =>\n        localStorage.setItem('bookings', olderBookings)\n      );\n      const newBookingArr: any = [\n        ...parsedOldBookings,\n        { busId, seatNumber, gender },\n      ];\n      setBookings(newBookingArr);\n      localStorage.setItem('bookings', JSON.stringify(newBookingArr));\n      Swal.fire('Booking Successful', '', 'success');\n      return () => sub.unsubscribe();\n    },\n    [setBookings]\n  );\n\n  const unBookSeat = () => {\n    // get get new data from localStroage\n    fetchBookings();\n  };\n\n  useEffect(() => {\n    fetchBookings();\n    observable$.subscribe();\n  }, []);\n\n  return (\n    <BookingContext.Provider\n      value={{\n        bookings,\n        searchQuery,\n        makeSearch,\n        fetchBookings,\n        bookSeat,\n        unBookSeat,\n      }}\n    >\n      <Home />\n    </BookingContext.Provider>\n  );\n}\n\nexport default App;\n","C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Home\\Home.tsx",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Header\\Header.js",[],["53","54"],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchBar\\SearchBar.tsx",["55","56","57"],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchResult\\SearchResults.tsx",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SearchResult\\SearchResult.tsx",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\Seat\\Seat.tsx",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\SeatInfo\\SeatInfo.tsx",[],"C:\\Users\\Hr\\Desktop\\My Project\\e-bus-ticket\\src\\components\\BookingModal\\BookingModal.tsx",["58","59","60"],"import React, { useEffect, useState, useContext } from 'react';\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport Swal from 'sweetalert2';\r\nimport { BookingContext } from '../../App';\r\n\r\ninterface Props {\r\n  busId: string;\r\n  seatNumber: string;\r\n}\r\n\r\nconst BookingModal: React.FC<Props> = ({ busId, seatNumber }) => {\r\n  const [show, setShow] = useState<boolean>(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n  const [formData, setFormData] = useState({ name: '', email: '', gender: '' });\r\n  const { bookSeat } = useContext(BookingContext);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const olderBookings: any = localStorage.getItem('bookings');\r\n  const parsedOldBookings: any =\r\n    (olderBookings && JSON.parse(olderBookings)) || [];\r\n\r\n  const seatPairNumber = seatNumber?.split('-')[0];\r\n\r\n  const makeBooking = () => {\r\n    const genderMismatch: any = parsedOldBookings.find((booking: any) => {\r\n      return (\r\n        booking.seatNumber.includes(seatPairNumber) &&\r\n        booking.gender === 'female' &&\r\n        formData.gender !== 'female'\r\n      );\r\n    });\r\n    const validEmailPattern = /^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$/;\r\n\r\n    if (!validEmailPattern.test(formData.email)) {\r\n      return Swal.fire('', 'Valid Email address required!', 'info');\r\n    } else if (!formData.gender) {\r\n      return Swal.fire('', 'Gender filed is mandatory!', 'info');\r\n    } else if (genderMismatch) {\r\n      handleClose();\r\n      return Swal.fire(\"Can't Book the seat\", '', 'error');\r\n    }\r\n    handleClose();\r\n    bookSeat(busId, seatNumber, formData.gender);\r\n  };\r\n  return (\r\n    <div>\r\n      <div className='text-center'>\r\n        {!parsedOldBookings.find(\r\n          (booking: any) =>\r\n            booking.seatNumber === seatNumber && booking.busId === busId\r\n        ) &&\r\n          seatNumber && (\r\n            <Button variant='success' onClick={handleShow}>\r\n              Book Now\r\n            </Button>\r\n          )}\r\n      </div>\r\n\r\n      <Modal\r\n        show={show}\r\n        onHide={handleClose}\r\n        backdrop='static'\r\n        keyboard={false}\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Passenger Info</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className='form-group'>\r\n            <label htmlFor='exampleInputEmail1'>Name</label>\r\n            <input\r\n              onChange={handleChange}\r\n              type='name'\r\n              name='name'\r\n              className='form-control'\r\n              placeholder='Enter Name'\r\n            />\r\n          </div>\r\n          <div className='form-group'>\r\n            <label htmlFor='exampleInputPassword1'>Email</label>\r\n            <input\r\n              onChange={handleChange}\r\n              type='email'\r\n              name='email'\r\n              className='form-control'\r\n              placeholder='Enter Email'\r\n            />\r\n          </div>\r\n          <div className='gender-selection'>\r\n            <div>\r\n              <label>Gender</label>\r\n            </div>\r\n            <div className='form-check form-check-inline'>\r\n              <input\r\n                onChange={handleChange}\r\n                className='form-check-input'\r\n                type='radio'\r\n                name='gender'\r\n                id='inlineRadio1'\r\n                value='male'\r\n              />\r\n              <label className='form-check-label' htmlFor='inlineRadio1'>\r\n                Male\r\n              </label>\r\n            </div>\r\n            <div className='form-check form-check-inline'>\r\n              <input\r\n                onChange={handleChange}\r\n                className='form-check-input'\r\n                type='radio'\r\n                name='gender'\r\n                id='inlineRadio2'\r\n                value='female'\r\n              />\r\n              <label className='form-check-label' htmlFor='inlineRadio2'>\r\n                Female\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant='secondary' onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button onClick={makeBooking} variant='success'>\r\n            Confirm\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookingModal;\r\n",{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","severity":1,"message":"66","line":101,"column":6,"nodeType":"67","endLine":101,"endColumn":8,"suggestions":"68"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","replacedBy":"64"},{"ruleId":"69","severity":1,"message":"70","line":14,"column":8,"nodeType":"71","messageId":"72","endLine":14,"endColumn":12},{"ruleId":"73","severity":1,"message":"74","line":69,"column":3,"nodeType":"75","messageId":"76","endLine":71,"endColumn":4},{"ruleId":"73","severity":1,"message":"74","line":75,"column":3,"nodeType":"75","messageId":"76","endLine":77,"endColumn":4},{"ruleId":"69","severity":1,"message":"77","line":1,"column":17,"nodeType":"71","messageId":"72","endLine":1,"endColumn":26},{"ruleId":"78","severity":1,"message":"79","line":36,"column":47,"nodeType":"80","messageId":"81","endLine":36,"endColumn":48,"suggestions":"82"},{"ruleId":"78","severity":1,"message":"79","line":36,"column":67,"nodeType":"80","messageId":"81","endLine":36,"endColumn":68,"suggestions":"83"},"no-native-reassign",["84"],"no-negated-in-lhs",["85"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchBookings'. Either include it or remove the dependency array.","ArrayExpression",["86"],"@typescript-eslint/no-unused-vars","'Swal' is defined but never used.","Identifier","unusedVar","no-lone-blocks","Nested block is redundant.","BlockStatement","redundantNestedBlock","'useEffect' is defined but never used.","no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["87","88"],["89","90"],"no-global-assign","no-unsafe-negation",{"desc":"91","fix":"92"},{"messageId":"93","fix":"94","desc":"95"},{"messageId":"96","fix":"97","desc":"98"},{"messageId":"93","fix":"99","desc":"95"},{"messageId":"96","fix":"100","desc":"98"},"Update the dependencies array to be: [fetchBookings]",{"range":"101","text":"102"},"removeEscape",{"range":"103","text":"104"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"105","text":"106"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"107","text":"104"},{"range":"108","text":"106"},[2694,2696],"[fetchBookings]",[1285,1286],"",[1285,1285],"\\",[1305,1306],[1305,1305]]